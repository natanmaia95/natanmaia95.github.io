<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Working on Fish Folk - Drifty | Natan Maia</title> <meta name="author" content="Natan Maia"> <meta name="description" content="Computer Science student and game developer. "> <meta name="keywords" content="jekyll, jekyll-theme, portfolio-website, game-development, gamedev"> <script type="application/ld+json">
    {
        "author":
        {
            "@type": "Person",
            "name": "Natan  Maia"
        },
        "url": "https://nateplays95.github.io/blog/2024/working-on-fishfolk-drifty/",
        "@type": "BlogPosting",
        "description": "Computer Science student and game developer.
",
        "headline": "Working on Fish Folk - Drifty",
        "sameAs": ["https://github.com/NatePlays95", "https://discord.com/users/341334925095469060", "https://nate-the-bard.itch.io"],
        "name": "Natan  Maia",
        "@context": "https://schema.org"
    }
    </script> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8D%B0&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://nateplays95.github.io/blog/2024/working-on-fishfolk-drifty/"> <link rel="alternate" type="application/atom+xml" title="blank" href="/feed.xml"> </head> <body class="fixed-top-nav sticky-bottom-footer"> <div class="bodycontainer"> <header> <div id="navparent" class="navparent"> <nav id="navbar" class="navbar navbar-light navbar-expand-sm"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Natan¬†</span>Maia</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> </ul> </div> </div> </nav> </div> </header> <div class="container mt-5 maincontainer"> <div class="post"> <header class="post-header"> <h1 class="post-title">Working on Fish Folk - Drifty</h1> <p class="post-meta">May 28, 2024</p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a> ¬† ¬∑ ¬† <a href="/blog/tag/devlog"> <i class="fa-solid fa-hashtag fa-sm"></i> devlog</a> ¬† </p> </header> <article class="post-content"> <div id="markdown-content"> <p>I didn‚Äôt update the blog too much these past months as most of my time was dedicated to bigger projects I couldn‚Äôt share too much about. However, this one in particular is getting a public reveal as I write this post so they gave me an OK to talk about it.</p> <p><em>Fish Folk: Drifty</em> is a kart racer with a half retro half cartoon aesthetic where little fish people drive funny bikes in pretty underwater environments. For the past few months I‚Äôve been sponsored by Erlend of <a href="https://github.com/spicylobstergames" rel="external nofollow noopener" target="_blank">Spicy Lobster</a> to make a prototype for what a racing game with their characters would look like, which could be used as a starting point for a Kickstarter campaign or a self funded project.</p> <div class="embed-responsive embed-responsive-16by9"> <figure> <iframe src="https://www.youtube.com/embed/SD3Mbme7IyQ?si=7pyitKmQ-hkBSe97" class="img-fluid rounded z-depth-1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="" width="auto" height="auto"></iframe> </figure> </div> <p>Making it into a commercial game is not part of my job, as this is supposed to be a proof-of-concept for a possible crowdfunding campaign, but it did mean I could explore aspects I hadn‚Äôt time to for my last racing game <a href="https://nateplays95.github.io/projects/project_nitro/">Project Nitro</a>, such as design and AI, which was great. I also managed to get my friend <a href="https://www.artstation.com/paulohncostaart" rel="external nofollow noopener" target="_blank">Paulo Costa</a> in to do the models and animations alongside the existing assets from other contributors of Spicy Lobster.</p> <h3 id="game-design">Game Design</h3> <div class="row mt-3"> <div class="col-2 mt-3 mt-md-0"></div> <div class="col-8 mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/devlogs/working-fishfolk-drifty-0.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-2 mt-3 mt-md-0"></div> </div> <p>By Erlend‚Äôs writing, Fish Folk games are supposed to be ‚Äúreally easy to play; no prior gaming experience required‚Äù, so the best reference material I picked is Mario Kart 8 Deluxe, one of Nintendo‚Äôs best selling games ever and for a reason. It has vibrant colorful visuals, an amazing live recorded soundtrack, strong ‚Äúpick-up-and-play‚Äù design and a surprising amount of accessibility features for a japanese game. Me and my friends and relatives have poured hundreds of hours in that game‚Äôs splitscreen mode, and it was worth every penny, and capturing that quality and solidity into a project of mine is one of my goals here.</p> <p>One of the aspects he also mentioned is ‚Äúmodding‚Äù, which I sadly don‚Äôt understand enough to capture in this prototype, but having seen amazing racing games which do feature modding, like Sonic Roboblast 2 Kart (which itself is a mod of a mod!), as well as the thriving community of custom tracks in games like Trackmania and Mario Kart Wii, I think there‚Äôs loads of potential to make such a game fresh and fun for a long time, as long as the base design and controls are great by themselves.</p> <p>However, my approach in choosing what aspects to borrow and what to reinvent from other games was very conservative, as with the timeframe I had for this project, I didn‚Äôt really want to experiment with more unusual ideas that I had a hunch would take a lot to make work. So while I embraced some of the ideas Erlend suggested for mechanics, like drivers having a ‚Äúbalance meter‚Äù that let them take a few hits before flipping over, or being able to kick your opponents to drive them off-course, some ideas had me worried. One of the ideas pitched was drivers having to attack either stationary objects or little creatures on the track to get their items, and not only do I think that would make races more complicated than just focusing on <em>driving</em> and <em>item usage</em>, in my head it sounds very clunky as new players would be able to miss getting any items, and as drivers attack to their sides not the front, you‚Äôd have a think window to adjust your racing line and press the button. I instead went with simple item boxes for now.</p> <h3 id="physics">Physics</h3> <p>Although I could just have ported the racing physics I had at the start, I first tried to implement simplified versions of it, to better fit the arcade-y nature of the Fish Folk games as well as fit the bike handling a bit better. All my attempts of using CharacterBody3D failed miserably üò∞. I then investigated code from my older projects and discovered Project Nitro had so many artificial constraints to keep the car from tumbling over (cars will rotate back to being straight up with time) that I could just build a car with two wheels. This does mean the new vehicles don‚Äôt enjoy going over half pipes or loop-de-loops but we don‚Äôt really need those for the track designs, so it‚Äôs fine.</p> <div class="row mt-3"> <div class="col-2 mt-3 mt-md-0"></div> <div class="col-8 mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/devlogs/working-fishfolk-drifty-2.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-2 mt-3 mt-md-0"></div> </div> <p>Basing the driving model around constrained physics instead of fake physics does mean sometimes the bikes will still try to react like rigidbodies in conditions I haven‚Äôt accounted for, like pushing up walls or bouncing on stuff, but if all those situations can be recognized you can just apply more constraints to account for them. For example, the bikes would usually bounce off the floor after a big jump, which didn‚Äôt let you immediately drive forwards, so I addressed it by adding a second StaticBody below the bike with an <em>absorbent</em> physics material which would remove 90% of the bounce from the jump and let the bike keep driving right after landing.</p> <h3 id="component-systems">Component Systems</h3> <p>I‚Äôve often felt a bit lost when trying to figure the architecture of many of the game‚Äôs systems. By not having tutorials to follow it all feels like uncharted territory, and I‚Äôd say that‚Äôs one of the fun parts of software development in general, but it does have its ups and downs.</p> <p>Godot is great at supporting composition-based architectures, so I experimented with that. Karts have different components to control animations, input and item use, which all could be swapped for different systems. But then I didn‚Äôt actually have different systems to swap between outside the inputs and the progress trackers, so that wasn‚Äôt a major selling point. Not shown here, but I actually think Godot groups work better than classes to determine if a certain node has a certain component, just because you can assign groups freely and quickly filter your tree with <code class="language-plaintext highlighter-rouge">get_nodes_in_group</code>.</p> <div class="row mt-3"> <div class="col-2 mt-3 mt-md-0"></div> <div class="col-8 mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/devlogs/working-fishfolk-drifty-3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-2 mt-3 mt-md-0"></div> </div> <p>I also gave up and delegated some of the logic to famous ‚ÄúManager scripts‚Äù, for stuff like ranking karts according to race progress. I still have ‚Äúcomponents‚Äù to each track that individually handle spawning the karts, doing camera fly-arounds and managing checkpoints if there are any, but the Manager coordinates all of them. Overall, I think composition in Godot is worth studying, because it can lead to very powerful systems for more content-centric games, but a project like this can use some hard-coded aspects just fine.</p> <h3 id="cpu-drivers">CPU Drivers</h3> <p>This time I wanted to expand on what I did in Project Nitro and research how to implement non-player drivers, if at least to serve as powerup fodder, but mostly to liven up the prototype and to introduce the vehicular combat mechanics like balance and the melee attacks. I <a href="https://github.com/fishfolk/drifty/wiki/Technical:-Driver-AI" rel="external nofollow noopener" target="_blank">wrote a lot about my knowledge on AI-controlled drivers in racing games so far</a> for future reference, but implementation is on the simpler side, especially since I haven‚Äôt yet studied artificial intelligence formally at the time of writing.</p> <p>In summary, if a vehicle has an AI driver assigned to it, it can look at the track‚Äôs assigned racing path, project the vehicle‚Äôs current position onto it, look at the position a few meters ahead, and steer the vehicle left or right as needed. For sharp turns they also decelerate. This does have the side effect of making all drivers follow a single line through the course, for which a good fix hasn‚Äôt come to me yet.</p> <div class="row mt-3"> <div class="col-2 mt-3 mt-md-0"></div> <div class="col-8 mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/devlogs/working-fishfolk-drifty-1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-2 mt-3 mt-md-0"></div> </div> <p>I also intend on placing a few sensors to each side of the kart so they won‚Äôt stick to each other unless they intend to attack other drivers, and they especially avoid any possible walls on the track.</p> <h3 id="the-business-side">The Business Side</h3> <p>I‚Äôm not one to talk much about numbers and contracts but I‚Äôm not under any NDAs this time so I might as well do.</p> <p>Erlend approached me via email after seeing both Project Nitro‚Äôs file on Github, as well as reading my blog post on it. I guess there just aren‚Äôt many open sourced racing game projects over there, I guess. We talked further via Discord, and his proposal was: he had a budget of 3000 dollars to develop a prototype of what a racing game with the Fish Folk would look like, and he could pay both Paulo and I $250 each for six months, and we‚Äôd work at what we deemed a reasonable rate for that value. For me, I deemed 8 hours a week for $250 was both around minimum wage in Brazil and enough work to fit with my schedule as a student.</p> <p>It seemed like a great deal, as I did want an opportunity to expand on Project Nitro and research other aspects I ignored before, and I could work with Paulo as an artist. The only problem left was to estimate if I could balance the project with my studies, and for that Erlend suggested we first do a month to see if I can fit the project in my routine and reassess from there. I did, wasn‚Äôt too much of a struggle to fit, so I accepted the deal. I also closed in on getting paid after each month‚Äôs over, which my father later warned me against, but Erlend made all the payments on time so I hadn‚Äôt much to worry this time.</p> <h3 id="challenges">Challenges</h3> <p>One of my biggest barriers during this period was probably how <em>technical debt</em> started getting to me, as there were less things I could port over from Project Nitro and more things I had to research for myself. Not knowing exactly when to use and not to use composition also didn‚Äôt help much. I had to redo some aspects like input and rankings and have yet to redo powerups as I first wanted a quick proof-of-concept, but then other systems required those to be more versatile and as such, refactoring was needed. I mentioned the spaghetti code aready.</p> <div class="row mt-3"> <div class="col-2 mt-3 mt-md-0"></div> <div class="col-8 mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/devlogs/working-fishfolk-drifty-4.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-2 mt-3 mt-md-0"></div> </div> <div class="caption">I feel this image describes my experience well. Maybe that's why they call it spaghetti code?</div> <p>I also had to learn alongside Paulo how to make a reasonable workflow for both designing and modelling the race track, and during that process not only did I let Paulo draw the course layout while I implemented other systems, but he also finished a lot of the track‚Äôs assets before I tested the road and offroad sections, and as such I didn‚Äôt have the courage to ask for some tweaks I felt would improve the track later on because both his modelling and my importing and collision matching were taking longer than I wanted to. As such, some curves ended up a bit wonky and there‚Äôs an empty uphill straight I didn‚Äôt know how to spice up gameplay-wise.</p> <p>In an ideal world, the artist would do concepts for the track‚Äôs theme, then the designer would sketch the layout, and then <em>someone</em> would graybox the layout and test and polish all the corners and sections before details are added. While I do have my own methods for grayboxing and modelling those tracks, not only am I not an expert, but other artists I know aren‚Äôt familiar with a few methods I use (like matching road slices to paths, or joining tris manually like it‚Äôs 1998). The graybox step is also important for making different geometries for <em>physics</em> and <em>visuals</em>, as often the collision shapes can be and often should be much simpler than their ingame models, for both game performance and physics predictability. This time around we didn‚Äôt do grayboxes but our models aren‚Äôt too complex so we used their original geometry for collisions too, as well as some invisible walls.</p> <p>The last challenge was probably balancing development consistency after a routine change: some university classes were temporarily paralyzed for a few months halfway through the semester. This had me working on Drifty as well as some long-term uni assignments at home, which broke my well established routine and, with most of my friends either living far away or being workaholics like me, brought my day-to-day much closer to the 2020 status quo of being stuck at home with little social interaction or work discipline. Barely being a <em>pandemic kid</em>, I did not enjoy this, but tried to work it out anyway. I felt my productivity going way down, which had me feeling guilty about sitting to work on the racing game and not making much progress from research. Addressing that is an ongoing process which I have to deal with myself.</p> <h3 id="closing-thoughts">Closing Thoughts</h3> <p>I haven‚Äôt finished my time with Drifty yet, there‚Äôs a lot I‚Äôm still working on, but I do want to leave the project with a bunch of documentation, both on design and technical aspects so any future contributors aren‚Äôt majorly lost (my ugly code doesn‚Äôt help matters though haha). Another post about this project is planned, too.</p> <p>I had an amazing time working on this project, it was very fulfilling and a great learning opportunity, I look forward to how this project will grow in the future, if the people at Spicy Lobster will take it somewhere, if they‚Äôll make something unique.</p> <p><a href="https://github.com/fishfolk/drifty" rel="external nofollow noopener" target="_blank">Here‚Äôs the link to the Github repo</a> if you wanna play or contribute to the project yourself. </p> </div> </article> </div> </div> <footer class="sticky-bottom mt-5"> <div class="container"> ¬© Copyright 2024 Natan Maia. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: July 17, 2024. </div> </footer> </div> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?07b8786bab9b4abe90d10e61f7d12ff7" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> </body> </html>